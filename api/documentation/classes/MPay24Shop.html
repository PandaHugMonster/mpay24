<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>mPAY24 PHP APIs » \MPay24Shop</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">mPAY24 PHP APIs</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<div xmlns:php="http://php.net/xsl" class="btn-toolbar">
<div class="btn-group visibility" data-toggle="buttons-checkbox">
<button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button>
</div>
<div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
</div>
<ul xmlns:php="http://php.net/xsl" class="side-nav nav nav-list">
<li class="nav-header">
<i title="Methods" class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method_MPay24Shop" title="MPay24Shop() :: The constructor, which sets all the initial values, in order to be able making transactions"><span class="description">The constructor, which sets all the initial values, in order to be able making transactions</span><pre>MPay24Shop()</pre></a></li>
<li class="method public inherited"><a href="#method_Transaction" title="Transaction() :: Create a transaction object and set the allowed properties from the TRANSACTION_PROPERTIES"><span class="description">Create a transaction object and set the allowed properties from the TRANSACTION_PROPERTIES</span><pre>Transaction()</pre></a></li>
<li class="method public inherited"><a href="#method___get" title="__get() :: Get the property of the Transaction object"><span class="description">Get the property of the Transaction object</span><pre>__get()</pre></a></li>
<li class="method public inherited"><a href="#method___set" title="__set() :: Set the property of the Transaction object"><span class="description">Set the property of the Transaction object</span><pre>__set()</pre></a></li>
<li class="method public "><a href="#method_cancelTransaction" title="cancelTransaction() :: Cancel a authorized transaction"><span class="description">Cancel a authorized transaction</span><pre>cancelTransaction()</pre></a></li>
<li class="method public "><a href="#method_clearAmount" title="clearAmount() :: Clear an amount of an authorized transaction"><span class="description">Clear an amount of an authorized transaction</span><pre>clearAmount()</pre></a></li>
<li class="method public "><a href="#method_confirm" title="confirm() :: Proceed the confirmation call"><span class="description">Proceed the confirmation call</span><pre>confirm()</pre></a></li>
<li class="method public "><a href="#method_createExpressCheckoutOrder" title="createExpressCheckoutOrder() :: Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with PayPal Express Checkout to be started"><span class="description">Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with PayPal Express Checkout to be started</span><pre>createExpressCheckoutOrder()</pre></a></li>
<li class="method public "><a href="#method_createFinishExpressCheckoutOrder" title="createFinishExpressCheckoutOrder() :: Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with PayPal Express Checkout to be finished"><span class="description">Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with PayPal Express Checkout to be finished</span><pre>createFinishExpressCheckoutOrder()</pre></a></li>
<li class="method public "><a href="#method_createMDXI" title="createMDXI() :: Using the ORDER object from order.php, create a MDXI-XML, which is needed for a transaction to be started"><span class="description">Using the ORDER object from order.php, create a MDXI-XML, which is needed for a transaction to be started</span><pre>createMDXI()</pre></a></li>
<li class="method public "><a href="#method_createProfileOrder" title="createProfileOrder() :: Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with profiles to be started"><span class="description">Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with profiles to be started</span><pre>createProfileOrder()</pre></a></li>
<li class="method public "><a href="#method_createSecret" title="createSecret() :: This is an optional function, but it's strongly recomended that you implement it - see details."><span class="description">This is an optional function, but it's strongly recomended that you implement it - see details.</span><pre>createSecret()</pre></a></li>
<li class="method public "><a href="#method_createTransaction" title="createTransaction() :: Create a transaction and save/return this (in a data base or file system (for example XML))"><span class="description">Create a transaction and save/return this (in a data base or file system (for example XML))</span><pre>createTransaction()</pre></a></li>
<li class="method public "><a href="#method_creditAmount" title="creditAmount() :: Credit an amount of a billed transaction"><span class="description">Credit an amount of a billed transaction</span><pre>creditAmount()</pre></a></li>
<li class="method public "><a href="#method_finishExpressCheckoutPayment" title="finishExpressCheckoutPayment() :: Finish the payment, started with PayPal Express Checkout - reserve, bill or cancel it: Whether are you going to reserve or bill a payment is setted at the beginning of the payment. With the 'cancel' parameter you are able also to cancel the transaction"><span class="description">Finish the payment, started with PayPal Express Checkout - reserve, bill or cancel it: Whether are you going to reserve or bill a payment is setted at the beginning of the payment. With the 'cancel' parameter you are able also to cancel the transaction</span><pre>finishExpressCheckoutPayment()</pre></a></li>
<li class="method public "><a href="#method_getPaymentMethods" title="getPaymentMethods() :: Get a list which includes all the payment methods (activated by mPAY24) for your mechant ID"><span class="description">Get a list which includes all the payment methods (activated by mPAY24) for your mechant ID</span><pre>getPaymentMethods()</pre></a></li>
<li class="method public "><a href="#method_getSecret" title="getSecret() :: Get the secret (hashed) token for a transaction"><span class="description">Get the secret (hashed) token for a transaction</span><pre>getSecret()</pre></a></li>
<li class="method public "><a href="#method_getTransaction" title="getTransaction() :: Give the transaction object back, for a transaction which has a transaction ID = $tid"><span class="description">Give the transaction object back, for a transaction which has a transaction ID = $tid</span><pre>getTransaction()</pre></a></li>
<li class="method public "><a href="#method_pay" title="pay() :: Return a redirect URL to start a payment"><span class="description">Return a redirect URL to start a payment</span><pre>pay()</pre></a></li>
<li class="method public "><a href="#method_payWithExpressCheckout" title="payWithExpressCheckout() :: Start a payment with PayPal Express Checkout"><span class="description">Start a payment with PayPal Express Checkout</span><pre>payWithExpressCheckout()</pre></a></li>
<li class="method public "><a href="#method_payWithProfile" title="payWithProfile() :: Start a payment with customer profile"><span class="description">Start a payment with customer profile</span><pre>payWithProfile()</pre></a></li>
<li class="method public "><a href="#method_updateTransaction" title="updateTransaction() :: Actualize the transaction, which has a transaction ID = $tid with the values from $args in your shop and return it"><span class="description">Actualize the transaction, which has a transaction ID = $tid with the values from $args in your shop and return it</span><pre>updateTransaction()</pre></a></li>
<li class="method public "><a href="#method_updateTransactionStatus" title="updateTransactionStatus() :: Get the transaction's current information - see details"><span class="description">Get the transaction's current information - see details</span><pre>updateTransactionStatus()</pre></a></li>
<li class="method public "><a href="#method_write_log" title="write_log() :: Write a log into a file, file system, data base"><span class="description">Write a log into a file, file system, data base</span><pre>write_log()</pre></a></li>
</ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="method protected inherited"><a href="#method_getProperties" title="getProperties() :: Get all the allowed properties for this transaction"><span class="description">Get all the allowed properties for this transaction</span><pre>getProperties()</pre></a></li>
<li class="method protected inherited"><a href="#method_setProperties" title="setProperties() :: Set all the allowed properties for this transaction"><span class="description">Set all the allowed properties for this transaction</span><pre>setProperties()</pre></a></li>
</ul>
</li>
<li class="nav-header private">» Private
                    <ul><li class="method private "><a href="#method_checkTransaction" title="checkTransaction() :: Check if the a transaction is created, whether the object is from type Transaction and whether the mandatory settings (TID and PRICE) of a transaction are setted"><span class="description">Check if the a transaction is created, whether the object is from type Transaction and whether the mandatory settings (TID and PRICE) of a transaction are setted</span><pre>checkTransaction()</pre></a></li></ul>
</li>
<li class="nav-header">
<i title="Properties" class="icon-custom icon-property"></i> Properties
                    <ul>
<li class="property public "><a href="#property_allowedProperties" title="$allowedProperties() :: An array, which contains the allowed properties for an transaction"><span class="description"></span><pre>$allowedProperties</pre></a></li>
<li class="property public "><a href="#property_mPay24Api" title="$mPay24Api() :: The mPAY24API Object, with you are going to work"><span class="description"></span><pre>$mPay24Api</pre></a></li>
<li class="property public "><a href="#property_properties" title="$properties() :: An array, which contains the set properties for this transaction object"><span class="description"></span><pre>$properties</pre></a></li>
</ul>
</li>
</ul>
</div>
<div class="span8">
<a xmlns:php="http://php.net/xsl" id="\MPay24Shop"></a><ul xmlns:php="http://php.net/xsl" class="breadcrumb">
<li>
<a href="../index.html"><i title="Classes" class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li class="active">
<span class="divider">\</span><a href="../classes/MPay24Shop.html">MPay24Shop</a>
</li>
</ul>
<div xmlns:php="http://php.net/xsl" class="element class">
<p class="short_description">The abstract MPay24Shop class provides abstract functions, which are used from the other functions in order to make a payment or a request to mPAY24</p>
<div class="details">
<div class="long_description"><p>TYPE:                PARAMETER -         VALUE(s), description</p>
<ul>
<li>STRING:            STATUS -             OK, ERROR</li>
<li>STRING:            OPERATION -          CONFIRMATION</li>
<li>STRING:            TID -                length &lt;= 32</li>
<li>STRING:            TRANSACTION_STATUS - RESERVED, BILLED, REVERSED, CREDITED, ERROR</li>
<li>INT:               PRICE -              length = 11 (e. g. &quot;10&quot; = &quot;0,10&quot;)</li>
<li>STRING:            CURRENCY -           length = 3 (ISO currency code, e. g. &quot;EUR&quot;)</li>
<li>STRING:            P_TYPE -             CC, ELV, EPS, GIROPAY, MAESTRO, PB, PSC, QUICK, etc</li>
<li>STRING:            BRAND -              AMEX, DINERS, JCB, MASTERCARD, VISA, ATOS, HOBEX-AT, HOBEX-DE, etc</li>
<li>INT:               MPAYTID -            length = 11</li>
<li>STRING:            USER_FIELD</li>
<li>STRING:            ORDERDESC</li>
<li>STRING:            CUSTOMER</li>
<li>STRING:            CUSTOMER_EMAIL</li>
<li>STRING:            LANGUAGE -           length = 2</li>
<li>STRING:            CUSTOMER_ID -        length = 11</li>
<li>STRING:            PROFILE_STATUS -     IGNORED, USED, ERROR, CREATED, UPDATED, DELETED</li>
<li>STRING:            FILTER_STATUS</li>
<li>STRING:            APPR_CODE</li>
</ul></div>
<table class="table table-bordered">
<tr>
<th>author</th>
<td><a href="mailto:support@mpay24.com">mPAY24 GmbH</a></td>
</tr>
<tr>
<th>version</th>
<td>$Id: MPay24Shop.php 6271 2015-04-09 08:38:50Z anna $</td>
</tr>
<tr>
<th>filesource</th>
<td>MPay24Shop.php</td>
</tr>
<tr>
<th>license</th>
<td><a href="http://ec.europa.eu/idabc/eupl.html">EUPL, Version 1.1</a></td>
</tr>
<tr>
<th>package</th>
<td><a href="../packages/Default.html">Default</a></td>
</tr>
<tr>
<th>inherited_from</th>
<td>\Transaction</td>
</tr>
</table>
<h3>
<i title="Methods" class="icon-custom icon-method"></i> Methods</h3>
<a id="method_MPay24Shop"></a><div class="element clickable method public method_MPay24Shop " data-toggle="collapse" data-target=".method_MPay24Shop .collapse" title="public">
<h2>The constructor, which sets all the initial values, in order to be able making transactions</h2>
<pre>MPay24Shop(integer $merchantID, string $soapPassword, boolean $test, boolean $debug<code> = false</code>, string $proxyHost<code> = null</code>, integer $proxyPort<code> = null</code>, string $proxyUser<code> = null</code>, string $proxyPass<code> = null</code>, boolean $verfiyPeer<code> = true</code>) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$merchantID</h4>
<code>integer</code><p>5-digit account number, supported by mPAY24:
TEST accounts - starting with 9
LIVE account - starting with 7</p></div>
<div class="subelement argument">
<h4>$soapPassword</h4>
<code>string</code><p>The webservice's password, supported by mPAY24</p></div>
<div class="subelement argument">
<h4>$test</h4>
<code>boolean</code><p>TRUE - when you want to use the TEST system,
FALSE - when you want to use the LIVE system</p></div>
<div class="subelement argument">
<h4>$debug</h4>
<code>boolean</code><p>TRUE - when you want to write log files,
FALSE - when you don't want write log files</p></div>
<div class="subelement argument">
<h4>$proxyHost</h4>
<code>string</code><p>The host name in case you are behind a proxy server ("" when not)</p></div>
<div class="subelement argument">
<h4>$proxyPort</h4>
<code>integer</code><p>4-digit port number in case you are behind a proxy server ("" when not)</p></div>
<div class="subelement argument">
<h4>$proxyUser</h4>
<code>string</code><p>The proxy user in case you are behind a proxy server ("" when not)</p></div>
<div class="subelement argument">
<h4>$proxyPass</h4>
<code>string</code><p>The proxy password in case you are behind a proxy server ("" when not)</p></div>
<div class="subelement argument">
<h4>$verfiyPeer</h4>
<code>boolean</code><p>Set as FALSE to stop cURL from verifying the peer's certificate</p></div>
</div></div>
</div>
<a id="method_Transaction"></a><div class="element clickable method public method_Transaction inherited" data-toggle="collapse" data-target=".method_Transaction .collapse" title="public">
<h2>Create a transaction object and set the allowed properties from the TRANSACTION_PROPERTIES</h2>
<pre>Transaction(string $tid) </pre>
<div class="labels"><span class="label">Inherited</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The ID of a transaction</p></div>
</div></div>
</div>
<a id="method___get"></a><div class="element clickable method public method___get inherited" data-toggle="collapse" data-target=".method___get .collapse" title="public">
<h2>Get the property of the Transaction object</h2>
<pre>__get(string $property) : string | boolean</pre>
<div class="labels"><span class="label">Inherited</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$property</h4>
<code>string</code><p>The name of the property, which is searched</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code><code>boolean</code>
</div>
</div></div>
</div>
<a id="method___set"></a><div class="element clickable method public method___set inherited" data-toggle="collapse" data-target=".method___set .collapse" title="public">
<h2>Set the property of the Transaction object</h2>
<pre>__set(string $property, mixed $value) </pre>
<div class="labels"><span class="label">Inherited</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$property</h4>
<code>string</code><p>The name of the property you want to set, see TRANSACTION_PROPERTIES</p></div>
<div class="subelement argument">
<h4>$value</h4>
<code>mixed</code><p>The value of the property you want to set</p></div>
</div></div>
</div>
<a id="method_cancelTransaction"></a><div class="element clickable method public method_cancelTransaction " data-toggle="collapse" data-target=".method_cancelTransaction .collapse" title="public">
<h2>Cancel a authorized transaction</h2>
<pre>cancelTransaction(string $tid) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID, for the transaction you want to cancel</p></div>
</div></div>
</div>
<a id="method_clearAmount"></a><div class="element clickable method public method_clearAmount " data-toggle="collapse" data-target=".method_clearAmount .collapse" title="public">
<h2>Clear an amount of an authorized transaction</h2>
<pre>clearAmount(string $tid, integer $amount) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID, for the transaction you want to clear</p></div>
<div class="subelement argument">
<h4>$amount</h4>
<code>integer</code><p>The amount you want to clear multiply by 100</p></div>
</div></div>
</div>
<a id="method_confirm"></a><div class="element clickable method public method_confirm " data-toggle="collapse" data-target=".method_confirm .collapse" title="public">
<h2>Proceed the confirmation call</h2>
<pre>confirm(string $tid, array $args) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID in the shop</p></div>
<div class="subelement argument">
<h4>$args</h4>
<code>array</code><p>A list with the arguments, provided with the confirmation</p></div>
</div></div>
</div>
<a id="method_createExpressCheckoutOrder"></a><div class="element clickable method public method_createExpressCheckoutOrder " data-toggle="collapse" data-target=".method_createExpressCheckoutOrder .collapse" title="public">
<h2>Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with PayPal Express Checkout to be started</h2>
<pre>createExpressCheckoutOrder(string $tid) : \XML</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID of the transaction you want to make an order transaction XML file for</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\XML</code></div>
</div></div>
</div>
<a id="method_createFinishExpressCheckoutOrder"></a><div class="element clickable method public method_createFinishExpressCheckoutOrder " data-toggle="collapse" data-target=".method_createFinishExpressCheckoutOrder .collapse" title="public">
<h2>Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with PayPal Express Checkout to be finished</h2>
<pre>createFinishExpressCheckoutOrder(string $tid, string $shippingCosts, string $amount, boolean $cancel) : \XML</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID of the transaction you want to make an order transaction XML file for</p></div>
<div class="subelement argument">
<h4>$shippingCosts</h4>
<code>string</code><p>The shipping costs amount for the transaction, provided by PayPal, after changing the shipping address</p></div>
<div class="subelement argument">
<h4>$amount</h4>
<code>string</code><p>The new amount for the transaction, provided by PayPal, after changing the shipping address</p></div>
<div class="subelement argument">
<h4>$cancel</h4>
<code>boolean</code><p>TRUE if the a cancelation is wanted after renewing the amounts and FALSE otherwise</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\XML</code></div>
</div></div>
</div>
<a id="method_createMDXI"></a><div class="element clickable method public method_createMDXI " data-toggle="collapse" data-target=".method_createMDXI .collapse" title="public">
<h2>Using the ORDER object from order.php, create a MDXI-XML, which is needed for a transaction to be started</h2>
<pre>createMDXI(\Transaction $transaction) : \ORDER</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$transaction</h4>
<code>\Transaction</code><p>The transaction you want to make a MDXI XML file for</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\ORDER</code></div>
</div></div>
</div>
<a id="method_createProfileOrder"></a><div class="element clickable method public method_createProfileOrder " data-toggle="collapse" data-target=".method_createProfileOrder .collapse" title="public">
<h2>Using the ORDER object from order.php, create a order-xml, which is needed for a transaction with profiles to be started</h2>
<pre>createProfileOrder(string $tid) : \XML</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID of the transaction you want to make an order transaction XML file for</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\XML</code></div>
</div></div>
</div>
<a id="method_createSecret"></a><div class="element clickable method public method_createSecret " data-toggle="collapse" data-target=".method_createSecret .collapse" title="public">
<h2>This is an optional function, but it's strongly recomended that you implement it - see details.</h2>
<pre>createSecret(string $tid, string $amount, string $currency, string $timeStamp) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>It should build a hash from the transaction ID of your shop, the amount of the transaction,
the currency and the timeStamp of the transaction. The mPAY24 confirmation interface will be called
with this hash (parameter name 'token'), so you would be able to check whether the confirmation is
really coming from mPAY24 or not. The hash should be then saved in the transaction object, so that
every transaction has an unique secret token.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID you want to make a secret key for</p></div>
<div class="subelement argument">
<h4>$amount</h4>
<code>string</code><p>The amount, reserved for this transaction</p></div>
<div class="subelement argument">
<h4>$currency</h4>
<code>string</code><p>The currency (3-digit ISO-Currency-Code) at the moment the transaction is created</p></div>
<div class="subelement argument">
<h4>$timeStamp</h4>
<code>string</code><p>The timeStamp at the moment the transaction is created</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a id="method_createTransaction"></a><div class="element clickable method public method_createTransaction " data-toggle="collapse" data-target=".method_createTransaction .collapse" title="public">
<h2>Create a transaction and save/return this (in a data base or file system (for example XML))</h2>
<pre>createTransaction() : \Transaction</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\Transaction</code></div>
</div></div>
</div>
<a id="method_creditAmount"></a><div class="element clickable method public method_creditAmount " data-toggle="collapse" data-target=".method_creditAmount .collapse" title="public">
<h2>Credit an amount of a billed transaction</h2>
<pre>creditAmount(string $tid, integer $amount) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID, for the transaction you want to credit</p></div>
<div class="subelement argument">
<h4>$amount</h4>
<code>integer</code><p>The amount you want to credit multiply by 100</p></div>
</div></div>
</div>
<a id="method_finishExpressCheckoutPayment"></a><div class="element clickable method public method_finishExpressCheckoutPayment " data-toggle="collapse" data-target=".method_finishExpressCheckoutPayment .collapse" title="public">
<h2>Finish the payment, started with PayPal Express Checkout - reserve, bill or cancel it: Whether are you going to reserve or bill a payment is setted at the beginning of the payment. With the 'cancel' parameter you are able also to cancel the transaction</h2>
<pre>finishExpressCheckoutPayment(string $tid, integer $shippingCosts, integer $amount, string $cancel) : \PaymentResponse</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID in the shop</p></div>
<div class="subelement argument">
<h4>$shippingCosts</h4>
<code>integer</code><p>The shippingcosts for the transaction multiply by 100</p></div>
<div class="subelement argument">
<h4>$amount</h4>
<code>integer</code><p>The amount you want to reserve/bill multiply by 100</p></div>
<div class="subelement argument">
<h4>$cancel</h4>
<code>string</code><p>ALLOWED: "true" or "false" - in case of 'true' the transaction will be canceled, otherwise reserved/billed</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\PaymentResponse</code></div>
</div></div>
</div>
<a id="method_getPaymentMethods"></a><div class="element clickable method public method_getPaymentMethods " data-toggle="collapse" data-target=".method_getPaymentMethods .collapse" title="public">
<h2>Get a list which includes all the payment methods (activated by mPAY24) for your mechant ID</h2>
<pre>getPaymentMethods() : \ListPaymentMethodsResponse</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\ListPaymentMethodsResponse</code></div>
</div></div>
</div>
<a id="method_getSecret"></a><div class="element clickable method public method_getSecret " data-toggle="collapse" data-target=".method_getSecret .collapse" title="public">
<h2>Get the secret (hashed) token for a transaction</h2>
<pre>getSecret(string $tid) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID you want to get the secret key for</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a id="method_getTransaction"></a><div class="element clickable method public method_getTransaction " data-toggle="collapse" data-target=".method_getTransaction .collapse" title="public">
<h2>Give the transaction object back, for a transaction which has a transaction ID = $tid</h2>
<pre>getTransaction(string $tid) : \Transaction</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID of the transaction you want get</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\Transaction</code></div>
</div></div>
</div>
<a id="method_pay"></a><div class="element clickable method public method_pay " data-toggle="collapse" data-target=".method_pay .collapse" title="public">
<h2>Return a redirect URL to start a payment</h2>
<pre>pay() : \PaymentResponse</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\PaymentResponse</code></div>
</div></div>
</div>
<a id="method_payWithExpressCheckout"></a><div class="element clickable method public method_payWithExpressCheckout " data-toggle="collapse" data-target=".method_payWithExpressCheckout .collapse" title="public">
<h2>Start a payment with PayPal Express Checkout</h2>
<pre>payWithExpressCheckout() : \PaymentResponse</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\PaymentResponse</code></div>
</div></div>
</div>
<a id="method_payWithProfile"></a><div class="element clickable method public method_payWithProfile " data-toggle="collapse" data-target=".method_payWithProfile .collapse" title="public">
<h2>Start a payment with customer profile</h2>
<pre>payWithProfile() : \PaymentResponse</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\PaymentResponse</code></div>
</div></div>
</div>
<a id="method_updateTransaction"></a><div class="element clickable method public method_updateTransaction " data-toggle="collapse" data-target=".method_updateTransaction .collapse" title="public">
<h2>Actualize the transaction, which has a transaction ID = $tid with the values from $args in your shop and return it</h2>
<pre>updateTransaction(string $tid, array $args, boolean $shippingConfirmed) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID you want to update with the confirmation</p></div>
<div class="subelement argument">
<h4>$args</h4>
<code>array</code><p>Arrguments with them the transaction is to be updated</p></div>
<div class="subelement argument">
<h4>$shippingConfirmed</h4>
<code>boolean</code><p>TRUE if the shipping address is confirmed, FALSE - otherwise (in case of PayPal Express Checkout)</p></div>
</div></div>
</div>
<a id="method_updateTransactionStatus"></a><div class="element clickable method public method_updateTransactionStatus " data-toggle="collapse" data-target=".method_updateTransactionStatus .collapse" title="public">
<h2>Get the transaction's current information - see details</h2>
<pre>updateTransactionStatus(string $tid) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>An array with all the data (by mPAY24) for this transaction (STATUS, CURRENCY, PRICE, APPR_CODE, etc) will be returned.
Possible values for the STATUS attribute:</p>
<ul>
<li>RESERVED - in case the authorization was successful but not cleared yet</li>
<li>BILLED - in case the authorization was successful and amount was cleared</li>
<li>CREDITED - in case amount was credited</li>
<li>REVERSED - in case the transaction was canceled</li>
<li>SUSPENDED - in case the transaction is not fully compleated yet</li>
<li>NOT FOUND - in case there is not such a transaction in the mPAY24 database</li>
<li>ERROR - in case the transaction was not successful</li>
</ul></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$tid</h4>
<code>string</code><p>The transaction ID (in your shop), for the transaction you are asking for</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>array</code></div>
</div></div>
</div>
<a id="method_write_log"></a><div class="element clickable method public method_write_log " data-toggle="collapse" data-target=".method_write_log .collapse" title="public">
<h2>Write a log into a file, file system, data base</h2>
<pre>write_log(string $operation, string $info_to_log) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$operation</h4>
<code>string</code><p>The operation, which is to log: GetPaymentMethods, Pay, PayWithProfile, Confirmation, UpdateTransactionStatus, ClearAmount, CreditAmount, CancelTransaction, etc.</p></div>
<div class="subelement argument">
<h4>$info_to_log</h4>
<code>string</code><p>The information, which is to log: request, response, etc.</p></div>
</div></div>
</div>
<a id="method_getProperties"></a><div class="element clickable method protected method_getProperties inherited" data-toggle="collapse" data-target=".method_getProperties .collapse" title="protected">
<h2>Get all the allowed properties for this transaction</h2>
<pre>getProperties() : array</pre>
<div class="labels"><span class="label">Inherited</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>array</code></div>
</div></div>
</div>
<a id="method_setProperties"></a><div class="element clickable method protected method_setProperties inherited" data-toggle="collapse" data-target=".method_setProperties .collapse" title="protected">
<h2>Set all the allowed properties for this transaction</h2>
<pre>setProperties(array $args) </pre>
<div class="labels"><span class="label">Inherited</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$args</h4>
<code>array</code><p>An array with the allowed properties</p></div>
</div></div>
</div>
<a id="method_checkTransaction"></a><div class="element clickable method private method_checkTransaction " data-toggle="collapse" data-target=".method_checkTransaction .collapse" title="private">
<h2>Check if the a transaction is created, whether the object is from type Transaction and whether the mandatory settings (TID and PRICE) of a transaction are setted</h2>
<pre>checkTransaction($transaction) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument"><h4>$transaction</h4></div>
</div></div>
</div>
<h3>
<i title="Properties" class="icon-custom icon-property"></i> Properties</h3>
<a id="property_allowedProperties"> </a><div class="element clickable property public property_allowedProperties" data-toggle="collapse" data-target=".property_allowedProperties .collapse" title="public">
<h2>An array, which contains the allowed properties for an transaction</h2>
<pre>$allowedProperties : </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array()</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_mPay24Api"> </a><div class="element clickable property public property_mPay24Api" data-toggle="collapse" data-target=".property_mPay24Api .collapse" title="public">
<h2>The mPAY24API Object, with you are going to work</h2>
<pre>$mPay24Api : </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>null</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_properties"> </a><div class="element clickable property public property_properties" data-toggle="collapse" data-target=".property_properties .collapse" title="public">
<h2>An array, which contains the set properties for this transaction object</h2>
<pre>$properties : </pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array()</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.8.2</a> and<br>
            generated on 2015-04-09T10:39:36+02:00.<br></footer></div>
</div>
</body>
</html>
